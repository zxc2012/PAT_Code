<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cs/Computer_Architecture/Arch_6">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">6 Virtual Memory | Chance&#x27;s blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://zxc2012.github.io/docs/cs/Computer_Architecture/Arch_6"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="6 Virtual Memory | Chance&#x27;s blog"><meta data-rh="true" name="description" content="Memory Basic"><meta data-rh="true" property="og:description" content="Memory Basic"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zxc2012.github.io/docs/cs/Computer_Architecture/Arch_6"><link data-rh="true" rel="alternate" href="https://zxc2012.github.io/docs/cs/Computer_Architecture/Arch_6" hreflang="en"><link data-rh="true" rel="alternate" href="https://zxc2012.github.io/docs/cs/Computer_Architecture/Arch_6" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9dd8938c.css">
<link rel="preload" href="/assets/js/runtime~main.ae41a094.js" as="script">
<link rel="preload" href="/assets/js/main.5a6cd904.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/cs/Computer_Architecture/Arch_1">üéìCS Fundamental</a><a class="navbar__item navbar__link" href="/docs/Language/Java/Java_1">‚òïÔ∏èLanguage</a><a class="navbar__item navbar__link" href="/docs/Algorithms/1">‚úèÔ∏èAlgorithms</a><a class="navbar__item navbar__link" href="/docs/SDE/experience">üí°Software Development</a><a class="navbar__item navbar__link" href="/docs/OJ/Leetcode1348">üçåLeetcode &amp; OJ</a><a class="navbar__item navbar__link" href="/docs/AI/1">üçâMachine Learning</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/cs/Computer_Architecture/Arch_1">Computer_Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cs/Computer_Architecture/Arch_1">1 Number Representation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cs/Computer_Architecture/Arch_2">2 RISCV Assembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cs/Computer_Architecture/Arch_3">3 RISCV Single-Cycle Control and Pipelining</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cs/Computer_Architecture/Arch_4">4 Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cs/Computer_Architecture/Arch_5">5 Parallelism</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/cs/Computer_Architecture/Arch_6">6 Virtual Memory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cs/Computer_Architecture/Arch_7">7 IO &amp; Summary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cs/Computer_Architecture/Arch_8">8 Cache Coherence &amp; Memory Consistency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cs/Computer_Architecture/Arch_9">9 Complex Pipelining</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cs/Database/cs186_1">Database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cs/Math/Math_1">Math</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cs/Network/network1">Network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cs/Operating_System/OS_1">Operating_System</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cs/webDevelop/web_1">webDevelop</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Computer_Architecture</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">6 Virtual Memory</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>6 Virtual Memory</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="memory-basic">Memory Basic<a href="#memory-basic" class="hash-link" aria-label="Direct link to Memory Basic" title="Direct link to Memory Basic">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory-multiplexing">Memory Multiplexing<a href="#memory-multiplexing" class="hash-link" aria-label="Direct link to Memory Multiplexing" title="Direct link to Memory Multiplexing">‚Äã</a></h3><p>MMU(Memory Management Unit) converts virtual to physical</p><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20230221203545.png" alt="20230221203545" class="img_ev3q"></p><p>Different Processes/Threads share the same hardware</p><ul><li>Need to multiplex CPU (Scheduling)</li><li>Need to multiplex use of Memory (Virtual Memory)</li></ul><p>Important Aspects of Memory Multiplexing</p><ul><li>Multiplexing: Allow multiple processes to simultaneously occupy memory</li><li>Protection: Prevent access to private memory of other processes</li><li>Translation: Give each program the illusion that it has its own private address space, and then translate accesses from virtual to physical</li></ul><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20220603203635.png" alt="20220603203635" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="base--bound-machine">Base &amp; Bound Machine<a href="#base--bound-machine" class="hash-link" aria-label="Direct link to Base &amp; Bound Machine" title="Direct link to Base &amp; Bound Machine">‚Äã</a></h3><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20221126210452.png" alt="20221126210452" class="img_ev3q"></p><p>Problems</p><ul><li><p>May need more space than segment allows</p></li><li><p>External Fragmentation: Free chunks between allocated regions</p><p>  <img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20230105233347.png" alt="20230105233347" class="img_ev3q"></p></li><li><p>Internal Fragmentation: Space inside allocated address space may not be fully used</p><p>  <img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20230105233503.png" alt="20230105233503" class="img_ev3q"></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-segmentation">Simple Segmentation<a href="#simple-segmentation" class="hash-link" aria-label="Direct link to Simple Segmentation" title="Direct link to Simple Segmentation">‚Äã</a></h3><p>if I have 16 bit address with 4 segments (code, data, stack, heap), use 2 segment bits</p><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20230221215032.png" alt="20230221215032" class="img_ev3q"></p><p>Pros: Minimize internal fragmentation</p><p>Cons: Still External fragmentation</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="address-translation">Address Translation<a href="#address-translation" class="hash-link" aria-label="Direct link to Address Translation" title="Direct link to Address Translation">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-paging">Simple Paging<a href="#simple-paging" class="hash-link" aria-label="Direct link to Simple Paging" title="Direct link to Simple Paging">‚Äã</a></h3><p>Instead of having segments of various sizes, divide physical memory and virtual memory into equal units called <em>pages</em></p><ul><li>Pages are the same size in both virtual and physical memory, and RAM is an integer multiple of pages</li><li>Avoids internal fragmentation: Each program has access to one or more pages(do not have to be contiguous)</li></ul><p>Virtual/Physical addresses can be broken into page number + offset(much likeT/I/O)</p><ul><li>Memory Size = <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>A</mi><mi>d</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>s</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^{Address}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight">dd</span><span class="mord mathnormal mtight">ress</span></span></span></span></span></span></span></span></span></span></span></span></span> Bytes</li><li>Page size Bytes = <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>O</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^{Offset}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em">O</span><span class="mord mathnormal mtight" style="margin-right:0.10764em">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span></span></span> Bytes</li><li>VPN/PPN = log_2(# of pages) = log_2(Memory Size/page size)</li></ul><p>Virtual addresses: Divided into pages indexed by virtual page number(VPN)</p><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20220603214329.png" alt="20220603214329" class="img_ev3q"></p><p>Physical addresses: Divided into pages indexed by phisical page number(PPN) or frame number</p><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20220603214355.png" alt="20220603214355" class="img_ev3q"></p><p>Example </p><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20220603214957.png" alt="20220603214957" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="page-table-entry">Page Table Entry<a href="#page-table-entry" class="hash-link" aria-label="Direct link to Page Table Entry" title="Direct link to Page Table Entry">‚Äã</a></h4><p>Each program has a page table, whose address store in PTBR(Page Table Base Register)</p><p>PTBR value saved/restored in PCB on context switch</p><ul><li>Dirty bit: Page has been modified recently</li><li>Valid bit<ul><li>1: virtual page is in physical memory</li><li>0: OS needs to fetch page from disk(Page Fault)</li></ul></li><li>Permission bits: Access Rights checked on every access to see if allowed (else protection fault)<ul><li>Read, Write, Executable</li></ul></li><li>PPN</li></ul><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20220603215849.png" alt="20220603215849" class="img_ev3q"></p><p>Example: </p><p>If we ignore the valid and permission bits, assume that page table entry only contains PPN</p><p>Number of pages needed by Page table = <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><msup><mn>2</mn><mrow><mi>V</mi><mi>P</mi><mi>N</mi></mrow></msup><mo>√ó</mo><mi>P</mi><mi>P</mi><mi>N</mi></mrow><mrow><mn>8</mn><mo>√ó</mo><mi>p</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{2^{VPN}\times PPN}{8\times pagesize}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.5185em;vertical-align:-0.4811em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0374em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span><span class="mbin mtight">√ó</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">g</span><span class="mord mathnormal mtight">es</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">ze</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9191em"><span style="top:-2.931em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em">V</span><span class="mord mathnormal mtight" style="margin-right:0.10903em">PN</span></span></span></span></span></span></span></span></span><span class="mbin mtight">√ó</span><span class="mord mathnormal mtight" style="margin-right:0.10903em">PPN</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="problems">Problems<a href="#problems" class="hash-link" aria-label="Direct link to Problems" title="Direct link to Problems">‚Äã</a></h4><p>32 bit processor, 12 bit offset-&gt; 4KB page size</p><blockquote><p>Memory = <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>20</mn></msup></mrow><annotation encoding="application/x-tex">2^{20}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">20</span></span></span></span></span></span></span></span></span></span></span></span></span> * 4 bytes(20 + valid bit + permission bits) = 4 MB</p></blockquote><p>64 bit processor, 12 bit offset</p><blockquote><p>Memory = <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>52</mn></msup></mrow><annotation encoding="application/x-tex">2^{52}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">52</span></span></span></span></span></span></span></span></span></span></span></span></span> * 8 bytes(52 + ...) = ridiculous!</p></blockquote><p>Problems:</p><ul><li>can be really large (span multiple pages), and sparsely populated</li><li>have to load the entire page table(may only need sections)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-level-paging">Multi-Level Paging<a href="#multi-level-paging" class="hash-link" aria-label="Direct link to Multi-Level Paging" title="Direct link to Multi-Level Paging">‚Äã</a></h3><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20221127214634.png" alt="20221127214634" class="img_ev3q"></p><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20230225224712.png" alt="20230225224712" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inverted-page-table">Inverted Page Table<a href="#inverted-page-table" class="hash-link" aria-label="Direct link to Inverted Page Table" title="Direct link to Inverted Page Table">‚Äã</a></h3><p>Physical memory &lt; Virtual memory: Much of process space may be out on disk or not in use</p><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20230221222300.png" alt="20230221222300" class="img_ev3q"></p><p>use a hash table</p><ul><li>Size Directly related to amount of physical memory</li><li>Very attractive option for 64-bit address spaces: PowerPC, UltraSPARC, IA64</li></ul><p>Cons</p><ul><li>Complexity of managing hash chains: Often in hardware!</li><li>Poor cache locality of page table</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="address-translation-comparison">Address Translation Comparison<a href="#address-translation-comparison" class="hash-link" aria-label="Direct link to Address Translation Comparison" title="Direct link to Address Translation Comparison">‚Äã</a></h3><table><tr><th></th><th>Advantages</th><th>Disadvantages</th></tr><tr><td>Simple Segmentation</td><td>Fast context switching (segment map maintained by CPU)</td><td>External fragmentation</td></tr><tr><td>Simple Paging</td><td>1.No external fragmentation 2.Fast and easy allocation</td><td>1.Large table size(~ virtual memory) 2.Internal fragmentation</td></tr><tr><td>Multi-Level Paging</td><td>1.Table size ~ # of pages in virtual memory 2.Fast and easy allocation</td><td>Multiple memory references per page access</td></tr><tr><td>Inverted Page Table</td><td>Table size ~ # of pages in physical memory</td><td>1.Hash function more complex 2.No cache locality of page table</td></tr></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="translation-lookaside-buffer-tlb">Translation Lookaside Buffer (TLB)<a href="#translation-lookaside-buffer-tlb" class="hash-link" aria-label="Direct link to Translation Lookaside Buffer (TLB)" title="Direct link to Translation Lookaside Buffer (TLB)">‚Äã</a></h2><p>MMU Problem: 2+ physical memory accesses per data access = SLOW</p><p>Build a separate cache for the Page Table: TLB</p><p><strong>TLB vs Cache</strong></p><ul><li>TLBs usually small, typically 32‚Äì128 entries</li><li>TLB access time comparable to cache (much faster than accessing main memory)</li><li>TLBs usually are fully/highly associativity</li></ul><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20221127220733.png" alt="20221127220733" class="img_ev3q"></p><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20221127220842.png" alt="20221127220842" class="img_ev3q"></p><p><strong>Page Locality</strong></p><ul><li>Instruction accesses spend a lot of time on the same page (since accesses sequential)</li><li>Stack accesses have definite locality of reference</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tlb-entry-format">TLB Entry Format<a href="#tlb-entry-format" class="hash-link" aria-label="Direct link to TLB Entry Format" title="Direct link to TLB Entry Format">‚Äã</a></h3><ul><li>Valid: whether that TLB ENTRY is valid (unrelated to PT)</li><li>Ref: Used to implement LRU, set when page is accessed, cleared periodically by OS</li><li>Access Rights: Data from the PT</li><li>Dirty: Consistent with PT</li><li>PPN: Data from PT</li><li>VPN: Data from PT</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="page-replacement-policy">Page Replacement Policy<a href="#page-replacement-policy" class="hash-link" aria-label="Direct link to Page Replacement Policy" title="Direct link to Page Replacement Policy">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-policy">Basic Policy<a href="#basic-policy" class="hash-link" aria-label="Direct link to Basic Policy" title="Direct link to Basic Policy">‚Äã</a></h3><ul><li>Random: Pick random page for every replacement</li><li>FIFO: Replace page we miss least recently</li><li>MIN: Replace page that will be used farthest in future</li><li>LRU: Replace page we used(hit &amp; miss) least recently(approximation to MIN)</li></ul><p>How to implement LRU?</p><p>Maintain a linked list. On each use, remove page from list and place at head, LRU page is at tail</p><p>Problems: Many instructions for each hardware access</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clock-algorithm">Clock Algorithm<a href="#clock-algorithm" class="hash-link" aria-label="Direct link to Clock Algorithm" title="Direct link to Clock Algorithm">‚Äã</a></h3><p>To approximate LRU, arrange all pages in circular list. Maintain a hardware <em>use</em> bit per physical page </p><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20230301165826.png" alt="20221127220842" class="img_ev3q"></p><p>On reference: set use bit</p><p>On page fault:</p><ul><li>Advance clock hand</li><li>Check use bit: 1 means used recently, clear and leave alone; The first 0 is selected candidate for replacement</li></ul><p>Problem: Replace an old page, not the oldest page</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nth-chance-clock-algorithm">Nth Chance Clock Algorithm<a href="#nth-chance-clock-algorithm" class="hash-link" aria-label="Direct link to Nth Chance Clock Algorithm" title="Direct link to Nth Chance Clock Algorithm">‚Äã</a></h3><p>OS keeps counter per page: # sweeps</p><p>On page fault, OS checks use bit:</p><ul><li>1: clear use and also clear counter (used in last sweep)</li><li>0: increment counter. if count=N,replace page</li></ul><p>Large N: good approximation</p><p>Small N: more efficient</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="paging-questions">Paging Questions<a href="#paging-questions" class="hash-link" aria-label="Direct link to Paging Questions" title="Direct link to Paging Questions">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="page-sharing">Page Sharing<a href="#page-sharing" class="hash-link" aria-label="Direct link to Page Sharing" title="Direct link to Page Sharing">‚Äã</a></h3><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20230226212443.png" alt="20230226212443" class="img_ev3q"></p><p>Senario</p><ul><li>Different processes running same binary</li><li>User-level system libraries (execute only)</li><li>Shared-memory segments between different processes</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contex-switch">Contex Switch<a href="#contex-switch" class="hash-link" aria-label="Direct link to Contex Switch" title="Direct link to Contex Switch">‚Äã</a></h3><p>Address Space just changed, so TLB entries no longer valid</p><p>Options</p><ol><li>Invalidate TLB: simple but might be expensive </li><li>Include ProcessID in TLB: needs hardware</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="demand-paging">Demand Paging<a href="#demand-paging" class="hash-link" aria-label="Direct link to Demand Paging" title="Direct link to Demand Paging">‚Äã</a></h3><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">Success</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> TlbEntry</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> TLB_Lookup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">VPN</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">Success </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># TLB Hit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">CanAccess</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">TlbEntry</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ProtectBits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        Register </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> AccessMemory</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PhysAddr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        RaiseException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PROTECTION_FAULT</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># Protection Fault</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">#TLB Miss</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    PTEAddr </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> PTBR </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">VPN </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> sizeof</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PTE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    PTE </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> AccessMemory</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PTEAddr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PTE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Valid </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token boolean">False</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># Invalid PTE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    RaiseException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">SEGMENTATION_FAULT</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">CanAccess</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PTE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ProtectBits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token boolean">False</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        RaiseException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PROTECTION_FAULT</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PTE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Present </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># Retry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        TLB_Insert</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">VPN</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> PTE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">PFN</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> PTE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ProtectBits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        RetryInstruction</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PTE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Present </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token boolean">False</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># Page Fault</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        RaiseException</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">PAGE_FAULT</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="protection-fault">Protection Fault<a href="#protection-fault" class="hash-link" aria-label="Direct link to Protection Fault" title="Direct link to Protection Fault">‚Äã</a></h4><p>Page table entry has protection bits inconsistent with operation</p><ul><li>Read/write/execute operation not permitted on the page</li></ul><p>Normally, OS sends segmentation fault, kills thread</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="page-fault">Page Fault<a href="#page-fault" class="hash-link" aria-label="Direct link to Page Fault" title="Direct link to Page Fault">‚Äã</a></h4><p>Suppose user references page with invalid PTE</p><ol><li><p>Load the page off the disk into a free page of memory. Switch to some other process while we wait</p><p>If memory full, replace page (LRU). If old page modified, write back to disk. Change its PTE and any cached TLB to be invalid</p></li><li><p>Maps page table entry in page table to frame, makes it present</p></li><li><p>Interrupt thrown(switch to thread from original faulting location) when page loaded and the process‚Äô page table is updated.</p><p>Continuous swapping between disk and memory called &quot;thrashing&quot;</p></li></ol><p><img loading="lazy" src="https://raw.githubusercontent.com/zxc2012/image/main/20230226222439.png" alt="20230226222439" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-scenarios">Other Scenarios<a href="#other-scenarios" class="hash-link" aria-label="Direct link to Other Scenarios" title="Direct link to Other Scenarios">‚Äã</a></h4><p>Process Fork</p><ul><li>Create a copy of the page table</li><li>Entries refer to parent pages ‚Äì NO-WRITE</li><li>Shared read-only pages remain shared</li><li>Copy page on write (different stack, heap)</li></ul><p>Exec</p><ul><li>Only bring in parts of the binary in active use</li><li>Do this on demand</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/zxc2012/zxc2012.github.io/tree/master/docs/cs/Computer_Architecture/Arch_6.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/cs/Computer_Architecture/Arch_5"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">5 Parallelism</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/cs/Computer_Architecture/Arch_7"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">7 IO &amp; Summary</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#memory-basic" class="table-of-contents__link toc-highlight">Memory Basic</a><ul><li><a href="#memory-multiplexing" class="table-of-contents__link toc-highlight">Memory Multiplexing</a></li><li><a href="#base--bound-machine" class="table-of-contents__link toc-highlight">Base &amp; Bound Machine</a></li><li><a href="#simple-segmentation" class="table-of-contents__link toc-highlight">Simple Segmentation</a></li></ul></li><li><a href="#address-translation" class="table-of-contents__link toc-highlight">Address Translation</a><ul><li><a href="#simple-paging" class="table-of-contents__link toc-highlight">Simple Paging</a></li><li><a href="#multi-level-paging" class="table-of-contents__link toc-highlight">Multi-Level Paging</a></li><li><a href="#inverted-page-table" class="table-of-contents__link toc-highlight">Inverted Page Table</a></li><li><a href="#address-translation-comparison" class="table-of-contents__link toc-highlight">Address Translation Comparison</a></li></ul></li><li><a href="#translation-lookaside-buffer-tlb" class="table-of-contents__link toc-highlight">Translation Lookaside Buffer (TLB)</a><ul><li><a href="#tlb-entry-format" class="table-of-contents__link toc-highlight">TLB Entry Format</a></li></ul></li><li><a href="#page-replacement-policy" class="table-of-contents__link toc-highlight">Page Replacement Policy</a><ul><li><a href="#basic-policy" class="table-of-contents__link toc-highlight">Basic Policy</a></li><li><a href="#clock-algorithm" class="table-of-contents__link toc-highlight">Clock Algorithm</a></li><li><a href="#nth-chance-clock-algorithm" class="table-of-contents__link toc-highlight">Nth Chance Clock Algorithm</a></li></ul></li><li><a href="#paging-questions" class="table-of-contents__link toc-highlight">Paging Questions</a><ul><li><a href="#page-sharing" class="table-of-contents__link toc-highlight">Page Sharing</a></li><li><a href="#contex-switch" class="table-of-contents__link toc-highlight">Contex Switch</a></li><li><a href="#demand-paging" class="table-of-contents__link toc-highlight">Demand Paging</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.ae41a094.js"></script>
<script src="/assets/js/main.5a6cd904.js"></script>
</body>
</html>