"use strict";(self.webpackChunkChance=self.webpackChunkChance||[]).push([[4757],{9234:(n,t,i)=>{i.r(t),i.d(t,{assets:()=>g,contentTitle:()=>m,default:()=>a,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var e=i(7462),r=(i(7294),i(3905));i(1839);const o={},m="\u9006\u900f\u89c6\u53d8\u6362\u8f66\u9053\u7ebf\u68c0\u6d4b",l={unversionedId:"Electronics/IPM",id:"Electronics/IPM",title:"\u9006\u900f\u89c6\u53d8\u6362\u8f66\u9053\u7ebf\u68c0\u6d4b",description:"\u6458\u8981",source:"@site/docs/Electronics/IPM.md",sourceDirName:"Electronics",slug:"/Electronics/IPM",permalink:"/docs/Electronics/IPM",draft:!1,editUrl:"https://github.com/zxc2012/zxc2012.github.io/tree/master/docs/Electronics/IPM.md",tags:[],version:"current",frontMatter:{},sidebar:"Electronics"},g={},c=[{value:"\u6458\u8981",id:"\u6458\u8981",level:2},{value:"\u9006\u900f\u89c6\u53d8\u6362",id:"\u9006\u900f\u89c6\u53d8\u6362",level:2},{value:"Code",id:"code",level:2}],p={toc:c};function a(n){let{components:t,...i}=n;return(0,r.kt)("wrapper",(0,e.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u9006\u900f\u89c6\u53d8\u6362\u8f66\u9053\u7ebf\u68c0\u6d4b"},"\u9006\u900f\u89c6\u53d8\u6362\u8f66\u9053\u7ebf\u68c0\u6d4b"),(0,r.kt)("h2",{id:"\u6458\u8981"},"\u6458\u8981"),(0,r.kt)("p",null,"\u968f\u7740\u793e\u4f1a\u7684\u8fdb\u6b65\u548c\u53d1\u5c55\uff0c\u5b89\u5168\u9a7e\u9a76\u548c\u6c7d\u8f66\u7684\u7b80\u4fbf\u64cd\u4f5c\u8d8a\u6765\u8d8a\u53d7\u5230\u4eba\u4eec\u7684\u91cd\u89c6\u3002\u82f9\u679c\u3001\u8c37\u6b4c\u548c\u7279\u65af\u62c9\u7b49\u516c\u53f8\u76f8\u7ee7\u63a8\u51fa\u4e86\u65e0\u4eba\u9a7e\u9a76\u7cfb\u7edf\uff0c\u56fd\u5185\u7684\u5382\u5546\u4e5f\u5bf9\u6b64\u9886\u57df\u4ea7\u751f\u4e86\u9ad8\u5ea6\u5174\u8da3\u3002\u57fa\u4e8e\u4eba\u5de5\u667a\u80fd\u548c\u5927\u6570\u636e\u7684\u65e0\u4eba\u9a7e\u9a76\u6280\u672f\uff0c\u88ab\u8ba4\u4e3a\u662f\u6d88\u9664\u4ea4\u901a\u5b89\u5168\u95ee\u9898\u7684\u6700\u7ec8\u65b9\u6cd5\u3002\u4ece\u7f8e\u56fdDARPA \u6311\u6218\u8d5b\u5230\u4e2d\u56fd\u672a\u6765\u667a\u80fd\u8f66\u5927\u8d5b\uff0c\u65e0\u4eba\u9a7e\u9a76\u6280\u672f\u5728\u5168\u4e16\u754c\u5174\u8d77\u4e86\u4e00\u9635\u70ed\u6f6e\u3002"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u65e0\u4eba\u9a7e\u9a76\u7cfb\u7edf\u6765\u8bf4\uff0c\u8f66\u9053\u7ebf\u68c0\u6d4b\u662f\u975e\u5e38\u91cd\u8981\u7684\u6280\u672f\u3002\u5230\u73b0\u5728\u4e3a\u6b62\uff0c\u5df2\u7ecf\u6709\u4e00\u4e9b\u57fa\u4e8e\u673a\u5668\u89c6\u89c9\u7684\u65e0\u4eba\u9a7e\u9a76\u6280\u672f\u5f97\u5230\u4e86\u5e94\u7528\u3002\u5bf9\u4e8e\u8f66\u9053\u7ebf\u7684\u68c0\u6d4b\u65b9\u6cd5\u5927\u81f4\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u4e09\u79cd\u601d\u60f3\uff1a\u57fa\u4e8e\u8f66\u9053\u7ebf\u6a21\u578b\u7684\u65b9\u6cd5\u548c\u57fa\u4e8e\u8f66\u9053\u7ebf\u7279\u5f81\u7684\u65b9\u6cd5\u3002\u57fa\u4e8e\u8f66\u9053\u7ebf\u6a21\u578b\u7684\u7b97\u6cd5\u5c31\u662f\u9488\u5bf9\u7ed3\u6784\u5316\u9053\u8def\uff0c\u6839\u636e\u5176\u9053\u8def\u5f62\u72b6\u5bf9\u8f66\u9053\u7ebf\u8fdb\u884c\u5efa\u6a21\uff0c\u53ef\u4ee5\u6709\u6548\u7684\u514b\u670d\u8def\u9762\u810f\u6c61\u3001\u5149\u7167\u5f3a\u3001\u9634\u5f71\u7b49\u73af\u5883\u56e0\u7d20\u9020\u6210\u7684\u5f71\u54cd\u3002\u57fa\u4e8e\u8f66\u9053\u7ebf\u7279\u5f81\u7684\u7b97\u6cd5\u4e3b\u8981\u662f\u4e24\u70b9\uff1a\u7279\u5f81\u63d0\u53d6\u548c\u7279\u5f81\u805a\u5408\u3002\u9996\u5148\u6839\u636e\u76ee\u6807\u4fe1\u606f\uff0c\u9009\u53d6\u5408\u9002\u7684\u7279\u5f81\uff0c\u7136\u540e\u5229\u7528\u8fd9\u4e9b\u7279\u5f81\u5bf9\u50cf\u50cf\u7d20\u70b9\u8fdb\u884c\u5f52\u7c7b\u5904\u7406\uff0c\u6839\u636e\u4e00\u5b9a\u7684\u51c6\u5219\u5c06\u8f66\u9053\u7ebf\u7c7b\u50cf\u7d20\u63d0\u53d6\u51fa\u6765\uff0c\u8fdb\u884c\u805a\u5408\u5904\u7406\u3002"),(0,r.kt)("p",null,"\u5176\u4e2d\uff0c\u4e00\u90e8\u5206\u7b97\u6cd5\u76f4\u63a5\u68c0\u6d4b\u9053\u8def\u7684\u8fb9\u7f18\uff0c\u800c\u53e6\u4e00\u4e9b\u7b97\u6cd5\u9996\u5148\u5229\u7528\u9053\u8def\u7684\u90e8\u5206\u53c2\u6570(\u4f8b\u5982\u989c\u8272\u4fe1\u606f)\u6765\u786e\u5b9a\u9053\u8def\u8fb9\u7f18\u3002\u7b97\u6cd5\u5e94\u7528\u7684\u6280\u672f\u4e5f\u6709\u5f88\u5927\u5dee\u522b(\u970d\u592b\u53d8\u6362\u3001\u9006\u900f\u89c6\u53d8\u6362\u548c\u795e\u7ecf\u7f51\u7edc\u7b49)\u3002\u5176\u4e2d\uff0c\u9006\u900f\u89c6\u53d8\u6362(IPM)\u6280\u672f\u5df1\u7ecf\u5728\u4e00\u4e9b\u5b9e\u9a8c\u4e2d\u5f97\u5230\u4e86\u5b9e\u9645\u9a8c\u8bc1\uff0c\u5982\u610f\u5927\u5229\u5e15\u5c14\u739b\u5927\u5b66\u7684GOLD\u5c31\u4f7f\u7528\u4e86\u6280\u672f\uff0c\u5bf9\u56fe\u50cf\u8fdb\u884c\u9884\u5904\u7406\uff1b\u8fd8\u6709Massimo Bertozzi\u7b49\u4f7f\u7528\u53cc\u76ee\u7acb\u4f53\u89c6\u89c9\u7684\u8fdb\u884c\u969c\u788d\u7269\u68c0\u6d4b\uff0c\u90fd\u53d6\u5f97\u4e86\u5f88\u597d\u7684\u6548\u679c\u3002"),(0,r.kt)("p",null,"\u672c\u6587\u63d0\u51fa\u4e86\u4e00\u79cd\u57fa\u4e8e\u9006\u900f\u89c6\u53d8\u6362\u7684\u8f66\u9053\u7ebf\u68c0\u6d4b\u7b97\u6cd5\uff0c\u9996\u5148\u901a\u8fc7matlab\u7f16\u5199\u56fe\u50cf\u5904\u7406\u7a0b\u5e8f\uff0c\u7136\u540e\u5c06\u5176\u5728\u5d4c\u5165\u5f0f\u667a\u80fd\u5c0f\u8f66\u4e0a\u9a8c\u8bc1\uff0c\u5c06MT9V032\u6444\u50cf\u5934\u62cd\u6444\u7684\u56fe\u50cf\u8f6c\u6362\u4e3a\u4fef\u89c6\u56fe\uff0c\u63a5\u7740\u91c7\u7528\u8fb9\u7f18\u68c0\u6d4b\u7684\u65b9\u6cd5\u5bf9\u8f66\u9053\u6807\u8bc6\u7ebf\u8fdb\u884c\u4e86\u63d0\u53d6\uff0c\u63d0\u53d6\u4e2d\u7ebf\u6548\u679c\u5f88\u597d\u3002"),(0,r.kt)("h2",{id:"\u9006\u900f\u89c6\u53d8\u6362"},"\u9006\u900f\u89c6\u53d8\u6362"),(0,r.kt)("p",null,"\u8f66\u8f7d\u6444\u50cf\u673a\u62cd\u6444\u5230\u7684\u573a\u666f\u56fe\u50cf\u662f\u4e09\u7ef4\u7a7a\u95f4\u7684\u573a\u666f\u5728\u4e8c\u7ef4\u7a7a\u95f4\u7684\u6295\u5f71,\u5728\u5bf9\u9053\u8def\u60c5\u51b5\u8fdb\u884c\u8bc6\u522b\u7684\u8fc7\u7a0b\u4e2d,\u9700\u8981\u4e00\u79cd\u9006\u7684\u6c42\u89e3\u8fc7\u7a0b,\u5373\u4ece\u5df2\u7ecf\u5f97\u5230\u7684\u4e8c\u7ef4\u56fe\u50cf\u8fd8\u539f\u6210\u4fef\u89c6\u7684\u8def\u9762\u56fe\u50cf.\u6b64\u5373\u9006\u900f\u89c6\u53d8\u6362\u3002"),(0,r.kt)("p",null,"\u7531\u5c0f\u5b54\u6210\u50cf\u539f\u7406\u53ef\u77e5\uff0c\u6444\u50cf\u673a\u4e09\u7ef4\u4e16\u754c\u5750\u6807(X,Y,Z)\u5230\u4e8c\u7ef4\u56fe\u50cf\u5750\u6807(x,y)\u53d8\u6362\u7684\u5173\u7cfb \u4e3a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/2020052121534723.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"(1.1)"),(0,r.kt)("p",null,"\u6839\u636e\u5f0f1.1\uff0c\u53ef\u7531\u4e09\u7ef4\u4e16\u754c\u5750\u6807\u5f97\u5230\u4e8c\u7ef4\u56fe\u50cf\u5750\u6807\uff0c\u7531\u4e8eZ\u672a\u77e5\uff0c\u6240\u4ee5\u53cd\u4e4b\u4e0d\u80fd\u5b9e\u73b0\uff0c\u8003\u8651\u5230\u667a\u80fd\u8f66\u5728\u4e00\u822c\u5e73\u9762\u9053\u8def\u4e0a\u884c\u9a76\uff0c\u53ef\u4ee4Z = 0\uff0c\u52191.1\u5f0f\u53ef\u53d8\u6362\u4e3a\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521215543375.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"(1.2)"),(0,r.kt)("p",null,"\u5f0f1.2\u53ef\u4ee5\u5efa\u7acb\u4e8c\u7ef4\u50cf\u7d20\u5750\u6807\u4e0e\u4e09\u7ef4\u4e16\u754c\u5e73\u9762\u5750\u6807\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u901a\u8fc7\u77e9\u9635\u53d8\u6362\u5f97\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521215623749.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"(1.3)"),(0,r.kt)("p",null,"\u5176\u4e2d "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521215700405.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521215733564.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521215818488.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}))),(0,r.kt)("p",null," \u7531\u6b64\u5f97"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521215920713.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521215906636.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}))),(0,r.kt)("p",null," \u6574\u7406\u6210\u77e9\u9635\u5f62\u5f0f"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521215959748.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521220046771.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"(1.4)")),(0,r.kt)("p",null," \u8bbe"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521220219405.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521220242360.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521220303985.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"}))),(0,r.kt)("p",null,"\u5219\u5f0f1.4\u7528\u77e9\u9635\u53ef\u8868\u793a\u4e3a\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/20200521220441818.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"})),(0,r.kt)("p",null,"\u82e5\u8981\u4fdd\u8bc11.4\u6709\u552f\u4e00\u89e3\uff0c\u5219\u9700\u6ee1\u8db3\u589e\u5e7f\u77e9\u9635\u4e3a\u6ee1\u79e9\uff0c\u5373rank(A|B)=8 \uff0c\u90a3\u4e48\u5c31\u9700\u8981\u56db\u7ec4\u4e0d\u76f8\u5173\u7684\u56fe\u50cf\u5750\u6807\u7cfb\u7684\u70b9\n\u3002\n\u5177\u4f53\u5b9e\u73b0\u4e0a\uff0c\u53ea\u9700\u627e\u51fa\u56db\u7ec4\u4e92\u4e0d\u76f8\u5173\u56fe\u50cf\u50cf\u7d20\u5750\u6807\u548c\u5bf9\u5e94\u7684\u4e16\u754c\u5750\u6807\uff0c\u7136\u540e\u901a\u8fc7matlab\u5373\u53ef\u89e3\u51faH\u53c2\u6570\u77e9\u9635\uff0c\u516c\u5f0f\u5f62\u5f0f\u7b80\u5355\uff0c\u4fbf\u4e8e\u5927\u91cf\u56fe\u50cf\u6570\u636e\u5904\u7406\u3002\n\u5bf9\u7070\u5ea6\u56fe\u9006\u900f\u89c6\u53d8\u6362\u7ed3\u679c:\n",(0,r.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/2020052122054291.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MzgwMjMw,size_16,color_FFFFFF,t_70",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"})),(0,r.kt)("h2",{id:"code"},"Code"),(0,r.kt)("p",null,"\u6211\u4f7f\u7528\u7684C\u4ee3\u7801\u5c31\u4e0d\u8d34\u4e86\uff0c\u8981\u770b\u5177\u4f53\u8d5b\u9053\u60c5\u51b5\uff0c\u8fd9\u91cc\u8d34\u4e00\u4e2a\u5bb9\u6613\u7406\u89e3\u7684Demo"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},'/*   \u6587\u4ef6\uff1a\u56fe\u50cf\u9006\u900f\u89c6\u53d8\u6362\n *\n *   \u8bf4\u660e\uff1a\u2460\u56fe\u50cf\u91c7\u96c6\u524d\u5bf9\u6876\u5f62\u53d8\u6362\u548c\u9006\u900f\u89c6\u53d8\u6362\u521d\u59cb\u5316\uff0c\u5efa\u7acb\u76f8\u5e94\u6620\u5c04\u8868\n *         \u2461\u91c7\u96c6\u5b8c\u4e00\u573a\u56fe\u50cf\u540e\uff0c\u82e5\u8c03\u7528IPMCorrect\uff08\uff09\u51fd\u6570\uff0c CorrImg[120][160]\u5b58\u50a8\u9006\u900f\u89c6\u53d8\u6362\u540e\u56fe\u50cf\n *           \u82e5\u8c03\u7528BuketCorrect\uff08\uff09\u51fd\u6570\uff0cCorrImg[120][160]\u5b58\u50a8\u6876\u5f62\u540e\u56fe\u50cf\n *         \u2462\u6240\u6709\u521d\u59cb\u5316\u51fd\u6570\u5747\u653e\u5728\u7a0b\u5e8f\u521d\u59cb\u90e8\u5206\u6267\u884c!!!\n *\n *   \u65b9\u6848\uff1a\u2460\u641c\u7ebf\uff1a\u5148\u5bf9\u539f\u59cb\u56fe\u50cf\u641c\u7ebf\uff0c\u7136\u540e\u6839\u636e\u5df2\u77e5\u8fb9\u754c\u521d\u6b65\u786e\u5b9a\u4e2d\u7ebf\uff0c\u5bf9\u4e8e\u5355\u8fb9\u4e22\u7ebf\u60c5\u51b5\u5bf9\u56fe\u50cf\u5c40\u90e8\u9006\u900f\u89c6\u53d8\u6362\uff0c\n *                \u5f97\u5230\u6b63\u89c6\u56fe\uff0c\u7136\u540e\u641c\u7ebf\u83b7\u5f97\u4e2d\u7ebf\uff0c\u518d\u901a\u8fc7\u9006\u6620\u5c04\u8868\u5f97\u5230\u539f\u59cb\u56fe\u50cf\u4e2d\u7ebf\n *                \u6700\u540e\u5229\u7528\u6700\u5c0f\u4e8c\u4e58\u6cd5\u5bf9\u4e2d\u7ebf\u5747\u5300\u5316\uff0c\u4fbf\u4e8e\u5904\u7406\u3002\n *         \u2461\u6d4b\u8ddd\uff1a\u5df2\u77e5\u56fe\u50cf\u5750\u6807\uff0c\u6839\u636e\u56fe\u50cf\u5750\u6807\u4e0e\u5b9e\u9645\u5750\u6807\u7684\u5173\u7cfb\uff0c\u53ef\u7b97\u51fa\u76f8\u5e94\u4e16\u754c\u5750\u6807\u4e0e\u8f66\u8ddd\u79bb\uff08\u539f\u70b9\u4e3a\u6444\u50cf\u5934\u4e2d\u5fc3\uff09\n *\n *            \u4e16\u754c\u5750\u6807(X,Y)\u4e0e\u56fe\u50cf\u5750\u6807(u,v)\u5173\u7cfb\u5982\u4e0b\n *            u = (0.0128*X-0.0007*Y-0.0463)/(0.0037*Y+1)/0.0365+80;\n *            v = (-0.007*Y+4.1192)/(0.0037*Y+1)/0.0365+60;\n * \n *            X = (1.24*u-0.021*v-100)/(0.0028*v+0.017); \n *            Y = (3.65*v-63.092)/(0.1103-0.0135*v);\n *\n *   \u6ce8\uff1a*******************************************************************************************\n */\n   \n#include "common.h" //\u5c71\u5916common.h\u5934\u6587\u4ef6\n#include "IPM.h"\n\nconst double f = 0.0021;\nconst double dx = 0.0365,dy = 0.0365;\n\nSite_t PMCorr[120][160];   //\u900f\u89c6\u6620\u5c04\u8868\uff0c\u7531\u539f\u59cb\u56fe\u5f97\u5230\u6b63\u89c6\u56fe\nSite_t BuketCorr[120][160];  //\u6876\u5f62\u77eb\u6b63\u6620\u5c04\u8868\nSite_t IPMCorr[120][160];  //\u9006\u900f\u89c6\u53cd\u77eb\u6b63\u6620\u5c04\u8868\uff0c\u7531\u6b63\u89c6\u56fe\u5f97\u5230\u539f\u59cb\u56fe\n\nunsigned char CorrImg[120][160]; //\u77eb\u6b63\u540e\u56fe\u50cf\u6570\u7ec4\uff0c\u7528\u4e8e\u56fe\u50cf\u5904\u7406\n                                  //\u6876\u5f62\u77eb\u6b63\u548c\u900f\u89c6\u53d8\u6362\u7528\u7684\u540c\u4e00\u4e2a\u6570\u7ec4\n\n\n// \u6876\u5f62\u77eb\u6b63\u521d\u59cb\u5316\uff0c\u5efa\u7acb\u77eb\u6b63\u8868 \n// k1 = -0.00001374; k2 = -0.00001057;  \n     \nvoid BuketCorrInit( float k1, float k2 ) //K1\u4e3aX\u65b9\u5411\u7578\u53d8\u53c2\u6570\uff0cK2\u4e3aY\u65b9\u5411\u7578\u53d8\u53c2\u6570\n{  \n    uint8 imgWidth = 160;   // \u83b7\u5f97\u6444\u50cf\u5934\u56fe\u50cf\u5c3a\u5bf8  \n    uint8 imgHeight = 120;  \n  \n    uint8 imgWd2 = imgWidth>>1;  \n    uint8 imgHd2 = imgHeight>>1;  \n  \n    int it;  \n    int jt;  \n    int it2;  \n    int jt2;  \n  \n    for( int i=0; i<imgHeight; i++ )  \n    {  \n        it = ( i + 1 ) - imgHd2; //  (i+1) \u662f\u5176\u771f\u6b63\u7684\u56fe\u50cf\u5750\u6807  \n        for( int j=0; j<imgWidth; j++ )  \n        {  \n            float temp;  \n  \n            jt = ( j + 1 ) - imgWd2; // (j+1) \u662f\u5176\u771f\u6b63\u7684\u56fe\u50cf\u5750\u6807  \n            temp = 1 + k1*it*it + k2*jt*jt; \n            \n            it2 = (int)(temp * it);\n            jt2 = (int)(temp * jt);  \n  \n            it2 = it2 + imgHd2 + 1;//\u6ce8\u610f\u6570\u7ec4\u8d8a\u754c\n            jt2 = jt2 + imgWd2 + 1;  \n\n            BuketCorr[i][j].x = jt2;  \n            BuketCorr[i][j].y = it2;  \n        }  \n    }  \n} \n  \nvoid PMCorrInit(void)  //\u900f\u89c6\u6b63\u53d8\u6362\u521d\u59cb\u5316\uff0c\u5efa\u7acb\u6b63\u6620\u5c04\u8868\n{\n   int u,v;\n   int x1,y1,i,j;\n   double X,Y,m,n,a,b;\n   unsigned char value; \n   \n   \n   for(v=0;v<120;v++)    //\u77eb\u6b63\u540e\u56fe\u50cf\u5750\u6807(u,v)\n   {\n     for(u=0;u<160;u++)\n     {\n       \n          X=(u-80)*dx/f; // \u6620\u5c04\u5230\u4e16\u754c\u5750\u6807(X,Y)\n          Y =(130-v)*dy/f;\n        \n          n = (0.0128*X-0.0007*Y-0.0463)/(0.0037*Y+1)/0.0365+80;\n          m = (-0.007*Y+4.1192)/(0.0037*Y+1)/0.0365+60;  //\u6620\u5c04\u5230\u539f\u59cb\u56fe\u50cf\u5750\u6807(n,m)\n          \n          j = floor(n);   //floor() iar\u7cfb\u7edf\u5e93\u51fd\u6570\n          i = floor(m);  //\u5229\u7528\u4e34\u754c\u63d2\u503c\n          a = m-i;\n          b = n-j;\n          if(a<0.5)\n          {\n            y1 = i;\n          }\n          else\n          {y1 = i+1;}\n          \n          if(b<0.5)\n          {x1 = j;}\n          else\n          {x1 = j+1;}\n          \n          if(x1>=0&&x1<160&&y1>=0&&y1<120)\n          {\n            PMCorr[v][u].x = x1; //\u6620\u5c04\u5230\u6570\u7ec4\n            PMCorr[v][u].y = y1;\n          }        \n     }\n     \n   }\n}\n\nvoid IPMCorrInit(void) //\u9006\u900f\u89c6\u6620\u5c04\u521d\u59cb\u5316\uff0c\u5efa\u7acb\u53cd\u77eb\u6b63\u8868\n{\n   int u,v;\n   int i,j,it,jt;\n   double X,Y,m,n,a,b;\n \n   for(v=0;v<120;v++) //%\u539f\u59cb\u56fe\u50cf\u5750\u6807(u,v)\n    {\n         for(u=0;u<160;u++)\n         {\n              X = (1.24*u-0.021*v-100)/(0.0028*v+0.017);//\u539f\u59cb\u56fe\u50cf\u6620\u5c04\u5230\u4e16\u754c\u5750\u6807\n              Y = (3.65*v-63.092)/(0.1103-0.0135*v); \n             \n              n = X*f/dx+80;\n              m = 130-Y*f/dy; //%\u6620\u5c04\u5230\u77eb\u6b63\u56fe\u50cf\u5750\u6807(n,m)\n              \n              j = floor(n);i = floor(m);  //%\u5229\u7528\u53cc\u7ebf\u6027\u63d2\u503c\u6cd5\u6216\u8005\u4e34\u8fd1\u63d2\u503c\n              a = m-i;b = n-j;\n            \n             if(a<0.5)\n               it = i;\n             else\n               it = i+1;\n             \n             if(b<0.5)\n               jt = j;\n             else\n               jt = j+1;\n             \n             if(it>0&&it<120&&jt>0&&jt<160)\n             {\n               IPMCorr[v][u].x = jt;\n               IPMCorr[v][u].y = it;\n             }\n\n         }     \n    }  \n}\n\n// \u955c\u5934\u5f84\u5411\u7578\u53d8\u6821\u6b63  \nvoid BuketCorrect(unsigned char (*ImgOrigin)[160])  \n{  \n    int it;  \n    int jt;  \n  \n    for( int i=0; i<120; i++ )  \n    {  \n        for( int j=0; j<160; j++ )  \n        {  \n            it = BuketCorr[i][j].y;  \n            jt = BuketCorr[i][j].x;  \n            CorrImg[i][j] = ImgOrigin[it][jt];\n        }  \n    }  \n}  \n\n\nvoid PMCorrect(unsigned char (*ImgOrigin)[160] ) //\u900f\u89c6\u6b63\u53d8\u6362\uff0c\u7528\u4e8e\u77eb\u6b63\u6bcf\u573a\u91c7\u96c6\u56fe\u50cf\n{\n    int it,jt,m,n;\n    int ImgTemp[120][160];\n    BuketCorrect(ImgOrigin); //\u5148\u6876\u5f62\u6620\u5c04\n    for(m=0;m<120;m++)  //\u6876\u5f62\u53d8\u6362\u540e\u56fe\u50cf\u62f7\u8d1d\uff0c\u7528\u4f5c\u9006\u900f\u89c6\u6620\u5c04\n    {\n       for(n=0;n<160;n++)\n       {\n           ImgTemp[m][n] = CorrImg[m][n];\n       }\n    }\n    for( int i=0; i<120; i++ )  \n    {  \n        for( int j=0; j<160; j++ )  \n        {  \n            it = PMCorr[i][j].y;  \n            jt = PMCorr[i][j].x;   \n            CorrImg[i][j] = ImgTemp[it][jt];\n        }  \n    }  \n}\n\n\n')))}a.isMDXComponent=!0}}]);