"use strict";(self.webpackChunkChance=self.webpackChunkChance||[]).push([[380],{9669:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>m,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var n=a(7462),s=(a(7294),a(3905));a(1839);const r={},m="CS61C Lecture7 --IO & Summary",i={unversionedId:"cs/Computer_Architecture/cs61c_7",id:"cs/Computer_Architecture/cs61c_7",title:"CS61C Lecture7 --IO & Summary",description:"Input/Output Devices",source:"@site/docs/cs/Computer_Architecture/cs61c_7.md",sourceDirName:"cs/Computer_Architecture",slug:"/cs/Computer_Architecture/cs61c_7",permalink:"/docs/cs/Computer_Architecture/cs61c_7",draft:!1,editUrl:"https://github.com/zxc2012/zxc2012.github.io/tree/master/docs/cs/Computer_Architecture/cs61c_7.md",tags:[],version:"current",frontMatter:{},sidebar:"cs",previous:{title:"CS61C Lecture6 --Virtual Memory",permalink:"/docs/cs/Computer_Architecture/cs61c_6"},next:{title:"CS186 Lecture1 --Relational Model & SQL",permalink:"/docs/cs/Database/cs186_1"}},p={},l=[{value:"Input/Output Devices",id:"inputoutput-devices",level:2},{value:"HDD",id:"hdd",level:3},{value:"SSD",id:"ssd",level:3},{value:"IO Communicating",id:"io-communicating",level:2},{value:"Polling",id:"polling",level:3},{value:"Interrupt",id:"interrupt",level:4},{value:"DMA",id:"dma",level:3},{value:"Performance",id:"performance",level:2},{value:"Efficiency",id:"efficiency",level:3},{value:"Power and Energy",id:"power-and-energy",level:3},{value:"Five Great Ideas in Computer Architecture",id:"five-great-ideas-in-computer-architecture",level:2}],o={toc:l};function c(e){let{components:t,...a}=e;return(0,s.kt)("wrapper",(0,n.Z)({},o,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"cs61c-lecture7---io--summary"},"CS61C Lecture7 --IO & Summary"),(0,s.kt)("h2",{id:"inputoutput-devices"},"Input/Output Devices"),(0,s.kt)("p",null,"Bus: Common set of wires for communication among hardware devices plus protocols for carrying out data transfer transactions"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Operations: e.g., Read, Write"),(0,s.kt)("li",{parentName:"ul"},"Control lines, Address lines, Data lines")),(0,s.kt)("p",null,"Two types of Disks:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Magnetic Drives: Information stored by magnetizing ferrite material on surface of rotating disk"),(0,s.kt)("li",{parentName:"ul"},"Flash Drives(Solid State Drives and Thumb Drives): Information stored by trapping charge in a semiconductor and MOSFET based dualgate transistor")),(0,s.kt)("h3",{id:"hdd"},"HDD"),(0,s.kt)("p",null,'Actuator moves head (end of arm) over track ("seek"), wait for sector to rotate under head, then read or write'),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/zxc2012/image/main/20230306170647.png",alt:"20230306170647"})),(0,s.kt)("p",null,"Disk Access Time = Seek Time + Rotation Time + Transfer Time + Controller Overhead"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Seek Time: time to position head to correct track",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Average Seek Time = 1/3 time for the head to cross all tracks"))),(0,s.kt)("li",{parentName:"ul"},"Rotation Time: time for disk to rotate to proper sector",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Average rotation time = 1/2 time of a rotation"))),(0,s.kt)("li",{parentName:"ul"},"Transfer Time: time for data to rotate under the head")),(0,s.kt)("h3",{id:"ssd"},"SSD"),(0,s.kt)("p",null,"Pros (vs. hard disk drives):"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Low latency, high throughput (eliminate seek/rotational delay)"),(0,s.kt)("li",{parentName:"ul"},"No moving parts: Very light weight, low power, silent, very shock insensitive"),(0,s.kt)("li",{parentName:"ul"},"Read at memory speeds (limited by controller and I/O bus)")),(0,s.kt)("p",null,"Cons"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"expensive (3-20x disk)"),(0,s.kt)("li",{parentName:"ul"},"Limited drive lifetime")),(0,s.kt)("h2",{id:"io-communicating"},"IO Communicating"),(0,s.kt)("p",null,"Processor accesses registers in two ways:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Port-Mapped I/O: in/out instructions"),(0,s.kt)("li",{parentName:"ul"},"Memory-mapped I/O: load/store instructions")),(0,s.kt)("p",null,"Here are 3 types of Memory-mapped I/O:"),(0,s.kt)("h3",{id:"polling"},"Polling"),(0,s.kt)("p",null,"Path to a device generally has 2 registers:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("em",{parentName:"li"},"Control")," Register says it\u2019s OK to read/write (I/O ready)"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("em",{parentName:"li"},"Data")," Register contains data")),(0,s.kt)("p",null,"Polling:"),(0,s.kt)("p",null,"(1)Processor reads from control register in a loop, waiting for device\nto set Ready bit (0 \u2192 1)"),(0,s.kt)("p",null,"(2)Processor then loads from (input) or writes to (output) data\nregister, resets Ready bit of control register (1 \u2192 0)"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/zxc2012/image/main/20230306163652.png",alt:"20220613201058"})),(0,s.kt)("p",null,"Pro: low overhead"),(0,s.kt)("p",null,"Con: may waste many cycles on polling if infrequent or unpredictable I/O operations"),(0,s.kt)("h4",{id:"interrupt"},"Interrupt"),(0,s.kt)("p",null,"Device generates an interrupt whenever it needs service"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Pro: handles unpredictable events well, asynchronous to current program"),(0,s.kt)("li",{parentName:"ul"},"Con: interrupts relatively high overhead")),(0,s.kt)("p",null,"Polling vs. Interrupts"),(0,s.kt)("p",null,"Low data rate (e.g. mouse, keyboard)"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},'Use interrupts to avoid "waiting" for data'),(0,s.kt)("li",{parentName:"ul"},"Overhead of interrupts ends up being low")),(0,s.kt)("p",null,"High data rate (e.g. network, disk)"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Start with interrupts"),(0,s.kt)("li",{parentName:"ul"},"Once you start getting data, switch to polling. Keep grabbing data until empty")),(0,s.kt)("h3",{id:"dma"},"DMA"),(0,s.kt)("p",null,"Directed Memory Access:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Device controller transfers data directly to/from memory without involving the processor"),(0,s.kt)("li",{parentName:"ul"},"Only interrupts once per page once transfer is done")),(0,s.kt)("p",null,"Mechanism"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"For incoming data, CPU receive interrupt from device; For outgoing data, CPU need to confirm that external device is ready"),(0,s.kt)("li",{parentName:"ol"},"CPU instructs DMA engine/device that data is available @ certain address"),(0,s.kt)("li",{parentName:"ol"},"Device/DMA engine handle the transfer, CPU is free to execute other thing"),(0,s.kt)("li",{parentName:"ol"},"Upon completion, Device/DMA engine interrupt the CPU again")),(0,s.kt)("h2",{id:"performance"},"Performance"),(0,s.kt)("h3",{id:"efficiency"},"Efficiency"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"CPI: Clock cycles per Instruction"),(0,s.kt)("li",{parentName:"ul"},"MIPS: Millions of Instructions per Second")),(0,s.kt)("p",null,"cpu time = Instructions ",(0,s.kt)("em",{parentName:"p"}," CPI ")," Clock cycle time"),(0,s.kt)("p",null,"= Instructions * CPI / Clock rate"),(0,s.kt)("p",null,"= Instructions / MIPS*10^6"),(0,s.kt)("h3",{id:"power-and-energy"},"Power and Energy"),(0,s.kt)("p",null,"Total power = dynamic power + leakage power"),(0,s.kt)("p",null,"Dynamic power ",(0,s.kt)("span",{parentName:"p",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mo",{parentName:"mrow"},"\u221d")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\propto")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,s.kt)("span",{parentName:"span",className:"mrel"},"\u221d")))))," activity ",(0,s.kt)("span",{parentName:"p",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mo",{parentName:"mrow"},"\xd7")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\times")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},"\xd7")))))," capaictance ",(0,s.kt)("span",{parentName:"p",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mo",{parentName:"mrow"},"\xd7")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\times")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},"\xd7")))))," voltage",(0,s.kt)("span",{parentName:"p",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("msup",{parentName:"mrow"},(0,s.kt)("mrow",{parentName:"msup"}),(0,s.kt)("mn",{parentName:"msup"},"2"))),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"^2")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8141em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},(0,s.kt)("span",{parentName:"span"}),(0,s.kt)("span",{parentName:"span",className:"msupsub"},(0,s.kt)("span",{parentName:"span",className:"vlist-t"},(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141em"}},(0,s.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},"2"))))))))))))," ",(0,s.kt)("span",{parentName:"p",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mo",{parentName:"mrow"},"\xd7")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\times")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},"\xd7")))))," frequency]"),(0,s.kt)("p",null,"Leakage power ",(0,s.kt)("span",{parentName:"p",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mo",{parentName:"mrow"},"\u221d")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\propto")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,s.kt)("span",{parentName:"span",className:"mrel"},"\u221d")))))," voltage"),(0,s.kt)("p",null,"Energy = power ",(0,s.kt)("span",{parentName:"p",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mo",{parentName:"mrow"},"\xd7")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\times")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},"\xd7")))))," time"),(0,s.kt)("h2",{id:"five-great-ideas-in-computer-architecture"},"Five Great Ideas in Computer Architecture"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/zxc2012/image/main/20220613201058.png",alt:"20220613201058"})),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/zxc2012/image/main/20220613201155.png",alt:"20220613201155"})),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/zxc2012/image/main/20220613201241.png",alt:"20220613201241"})),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/zxc2012/image/main/20220613201310.png",alt:"20220613201310"}),(0,s.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/zxc2012/image/main/20220613201400.png",alt:"20220613201400"})))}c.isMDXComponent=!0}}]);